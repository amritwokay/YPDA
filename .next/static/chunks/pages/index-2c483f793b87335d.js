(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(60654)}])},60654:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var a=r(11010),n=r(91309),s=r(4586),o=r(97582),l=r(85893),i=r(67294),u=r(5152),c=r.n(u),d=r(26671),h=r(30340),m=r(59417),x=r(99603),p=r(82010);function f(e){var t=e.className,r=(0,n._)((0,i.useState)(!1),2),a=r[0],s=r[1],o=(0,p.F)(),u=o.systemTheme,c=o.theme,d=o.setTheme,h="system"===c?u:c;return((0,i.useEffect)(function(){s(!0)},[]),a)?(0,l.jsx)("button",{onClick:function(){return"dark"===h?d("light"):d("dark")},className:t,children:"dark"===h?(0,l.jsx)(x.G,{icon:m.enB,className:"w-4 h-4 text-gray-400"}):(0,l.jsx)(x.G,{icon:m.DBF,className:"w-4 h-4 text-blue-500"})}):null}var g=r(6154);function b(){return(b=(0,a._)(function(e){var t,a;return(0,o.Jh)(this,function(n){return t=r(97218),a={method:"post",maxBodyLength:1/0,url:"https://k7i6qgtut5.execute-api.us-east-1.amazonaws.com/dev",headers:{"Content-Type":"application/json"},data:JSON.stringify({sqlQuery:e})},[2,t.request(a).then(function(e){return console.log(e.data.body),e.data.body}).catch(function(e){return console.log(e),""})]})})).apply(this,arguments)}var y=r(86501),w=r(94303),A=r.n(w),C=function(e){var t=e.color,r=void 0===t?"#000":t,a=e.style;return(0,l.jsxs)("span",{className:"small"==(void 0===a?"small":a)?A().loading2:A().loading,children:[(0,l.jsx)("span",{style:{backgroundColor:r}}),(0,l.jsx)("span",{style:{backgroundColor:r}}),(0,l.jsx)("span",{style:{backgroundColor:r}})]})},N=r(41664),R=r.n(N),S=r(41023),v=function(e){e.className,(0,p.F)().resolvedTheme;var t=(0,S.Z)().signOut;return(0,l.jsxs)("header",{className:"flex flex-col sm:flex-row sm:justify-between w-full pt-4 pb-8 px-2",children:[(0,l.jsxs)(R(),{href:"/",className:"flex flex-col",children:[(0,l.jsx)("h1",{className:"font-montserrat font-bold sm:text-xl tracking-tight",children:"DataPrompters"}),(0,l.jsx)("p",{className:"font-mono font-bold text-gray-600",children:"Insights Delayed Are Opportunities Decayed"})]}),(0,l.jsx)("div",{className:"absolute top-2.5 right-2.5",children:(0,l.jsx)("button",{onClick:function(){return t()},children:(0,l.jsx)("b",{children:"Sign Out"})})})]})},j=function(e){var t=JSON.parse(e.jsonText);return(0,l.jsxs)("table",{className:"border-collapse border border-gray-300",children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:(0===t.length?[]:Object.keys(t[0])).map(function(e,t){return(0,l.jsx)("th",{className:"border border-gray-300 p-2",children:e},t)})})}),(0,l.jsx)("tbody",{children:t.map(function(e,t){var r="row-".concat(t),a=Object.entries(e);return(0,l.jsx)("tr",{children:a.map(function(e){var t=(0,n._)(e,2),r=t[0],a=t[1],s="column-".concat(r),o=a.S;return(0,l.jsx)("td",{children:String(o)},s)})},r)}).map(function(e,t){return(0,l.jsx)("tr",{children:e.props.children.map(function(e,t){return(0,l.jsx)("td",{className:"border border-gray-300 p-2",children:e.props.children},t)})},t)})})]})},T=c()(function(){return r.e(540).then(r.bind(r,87540))},{loadableGenerated:{webpack:function(){return[87540]}}});function k(){var e,t,r,u,c,m,x,w,A,N,R,S,k,_,D=function(e){try{return JSON.parse(e)}catch(e){return console.error("JSON parse error:",e),null}},E=(0,p.F)().resolvedTheme,H="dark"===E,I=(0,n._)((0,i.useState)(!1),2),V=I[0],L=I[1],O=(t=(e=(0,n._)((0,i.useState)(!1),2))[0],r=e[1],c=(u=(0,n._)((0,i.useState)(""),2))[0],m=u[1],w=(x=(0,n._)((0,i.useState)(""),2))[0],A=x[1],R=(N=(0,n._)((0,i.useState)(""),2))[0],S=N[1],k=(0,a._)(function(e){var t,a,n,s,l,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:t=e.inputText,a=e.tableSchema,n=e.isHumanToSql,r(!0),o.label=1;case 1:return o.trys.push([1,6,7,8]),s={inputText:t},""!==a&&(s.tableSchema=a),[4,g.Z.post("/api/".concat(n?"translate":"sql-to-human"),s,{headers:{"Content-Type":"application/json"}})];case 2:if(200!==(l=o.sent()).status)return[3,4];return A(i=l.data.outputText.toLowerCase()),[4,function(e){return b.apply(this,arguments)}(i)];case 3:return m.apply(void 0,[o.sent()]),[3,5];case 4:S("Error translating ".concat(n?"to SQL":"to human",".")),o.label=5;case 5:return[3,8];case 6:return console.error(o.sent()),S("Error translating ".concat(n?"to SQL":"to human",".")),[3,8];case 7:return r(!1),[7];case 8:return[2]}})}),{outputText:c,setOutputText:m,sqlQuery:w,setSqlQuery:A,translate:function(e){return k.apply(this,arguments)},translating:t,translationError:R}),F=O.translate,q=O.translating,P=O.outputText,M=(O.setOutputText,O.translationError),Q=(0,n._)((0,i.useState)(""),2),J=Q[0],B=Q[1],G=(0,n._)((0,i.useState)([]),2),z=G[0],K=G[1],W=(0,n._)((0,i.useState)(!0),2),X=W[0];W[1];var Y=(0,n._)((0,i.useState)(!1),2);Y[0],Y[1];var Z=(0,n._)((0,i.useState)(""),2),U=Z[0],$=Z[1],ee=(0,n._)((0,i.useState)(!1),2),et=ee[0],er=ee[1],ea=(0,n._)((0,i.useState)([]),2),en=ea[0],es=ea[1],eo=(0,n._)((0,i.useState)(!1),2),el=eo[0],ei=eo[1],eu=(0,n._)((0,i.useState)(!1),2),ec=eu[0],ed=eu[1],eh=(0,n._)((0,i.useState)(),2);if(eh[0],eh[1],(0,i.useEffect)(function(){J&&ec&&(es(function(e){return(0,s._)(e).concat([{inputText:JSON.stringify(J),outputText:JSON.stringify(P),tableSchema:U,isHumanToSql:X}])}),em({inputText:JSON.stringify(J),tableSchema:U,isHumanToSql:X,outputText:JSON.stringify(P)}),ed(!1))},[P]),(0,i.useEffect)(function(){L(!0)},[]),(0,i.useEffect)(function(){M&&y.Am.error(M)},[M]),!V)return null;var em=function(e){en.some(function(t){var r=t.inputText,a=t.outputText;return r===e.inputText&&a===e.outputText})||z.some(function(t){var r=t.previnput,a=t.prevoutput;return r===e.inputText&&a===e.outputText})||es((0,s._)(en).concat([e]));var t={previnput:e.inputText,prevoutput:e.outputText};K((0,s._)(z).concat([t]))},ex={light:"light-button-w-gradient-border text-black",dark:"dark-button-w-gradient-border text-[#D8D8D8]"},ep=(_=(0,a._)(function(e){var t;return(0,o.Jh)(this,function(r){e.preventDefault();try{if(!X&&(t=/^\s*(select|insert|update|delete|create|alter|drop|truncate|grant|revoke|use|begin|commit|rollback)\s/i,!new RegExp(t).test(J)))return y.Am.error("Invalid SQL syntax."),[2];if(et&&!new RegExp(/^CREATE\s+TABLE\s+\w+\s*\((\s*.+\s*,?\s*)+\);?$/i).test(U.trim()))return y.Am.error("Invalid table schema."),[2];F({inputText:J,tableSchema:U,isHumanToSql:X}),ed(!0)}catch(e){console.log(e),y.Am.error("Error translating ".concat(X?"to SQL":"to human","."))}return[2]})}),function(e){return _.apply(this,arguments)});return(0,l.jsxs)("div",{children:[(0,l.jsx)(v,{}),(0,l.jsx)(f,{className:"absolute top-2.5 left-2.5 text-gray-500 dark:text-gray-400 focus:outline-none hover:scale-125 transition"}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row w-full gap-6 bg-[#EEEEEE] dark:text-white dark:bg-black dark:border dark:border-white/20 rounded-2xl p-2",children:[(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("form",{onSubmit:function(e){return ep(e)},className:"rounded-xl bg-white border dark:border-gray-800 dark:bg-custom-gray shadow-md p-6 w-full h-full",children:(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[(0,l.jsx)("label",{htmlFor:"inputText",className:"block font-medium mb-2 text-gray-700 dark:text-gray-200",children:X?"Ask Me":"SQL"}),(0,l.jsx)("textarea",{className:"appearance-none border-0 rounded-lg w-full py-2 px-3 bg-custom-gray-bg dark:bg-custom-dark-gray text-gray-700 dark:text-white leading-tight focus:outline-none focus:shadow-outline ".concat(H?"placeholder-dark":""),id:"inputText",rows:3,placeholder:X?"e.g. show me the profits for year 2015":"SELECT * FROM cars WHERE color = 'red'",value:J,onChange:function(e){B(e.target.value),et||$("CREATE TABLE superstore (RowID INT,OrderID INT,OrderDate DATE,ShipDate DATE,ShipMode VARCHAR(255),CustomerID INT,CustomerName VARCHAR(255),Segment VARCHAR(255),Country VARCHAR(255),City VARCHAR(255),State VARCHAR(255),PostalCode VARCHAR(255),Region VARCHAR(255),ProductID INT,Category VARCHAR(255),SubCategory VARCHAR(255),Sales DECIMAL(10, 2),Quantity INT,Discount DECIMAL(5, 2),Profit DECIMAL(10, 2));")},onKeyDown:function(e){"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&ep(e)},required:!0}),U&&et&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("h2",{className:"mb-2 font-medium text-sm text-gray-500 dark:text-white",children:"Table Schema"}),(0,l.jsx)(T,{language:"sql",style:H?d.cL:d.vs,wrapLines:!0,showLineNumbers:!0,lineNumberStyle:{color:H?"gray":"#ccc"},customStyle:{maxHeight:"none",height:"auto",overflow:"visible",wordWrap:"break-word",color:"inherit",backgroundColor:H?"#1D1D1D":"#F8F8F8",borderRadius:"0.5rem"},lineProps:{style:{whiteSpace:"pre-wrap"}},children:U})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between my-3 last:mb-0 space-x-10",children:[X&&(0,l.jsx)("button",{type:"button",className:"rounded-full flex items-center justify-center space-x-4 border text-sm font-medium px-4 py-2 [text-shadow:0_0_1px_rgba(0,0,0,0.25)] ".concat("light"===E?ex.light:ex.dark),onClick:function(){er(!et),et||$("CREATE TABLE superstore (RowID INT,OrderID INT,OrderDate DATE,ShipDate DATE,ShipMode VARCHAR(255),CustomerID INT,CustomerName VARCHAR(255),Segment VARCHAR(255),Country VARCHAR(255),City VARCHAR(255),State VARCHAR(255),PostalCode VARCHAR(255),Region VARCHAR(255),ProductID INT,Category VARCHAR(255),SubCategory VARCHAR(255),Sales DECIMAL(10, 2),Quantity INT,Discount DECIMAL(5, 2),Profit DECIMAL(10, 2));")},children:et?"Hide Schema":"View Schema"}),(0,l.jsxs)("button",{type:"submit",className:"cursor-pointer py-2 px-4y rounded-full blue-button-w-gradient-border [text-shadow:0_0_1px_rgba(0,0,0,0.25)] shadow-2xl flex flex-row items-center justify-start ".concat(q&&"opacity-50 pointer-events-none"),disabled:q,children:[(0,l.jsx)("img",{src:"/stars.svg"}),"\xa0",(0,l.jsx)("div",{className:"relative text-sm font-semibold font-inter text-white text-center inline-block mx-auto",children:q?(0,l.jsxs)(l.Fragment,{children:["Retrieveing Data",(0,l.jsx)(C,{color:"white"})]}):"Generate Result"})]})]}),X&&et&&(0,l.jsxs)("div",{className:"flex flex-col mt-2",children:[(0,l.jsx)("label",{htmlFor:"tableSchema",className:"block mb-2 text-sm font-medium text-gray-500 dark:text-white",children:"Table Schema Input"}),(0,l.jsx)("textarea",{className:"appearance-none border-0 rounded-lg w-full py-2 px-3 bg-custom-gray-bg dark:bg-custom-dark-gray text-gray-700 dark:text-white leading-tight focus:outline-none focus:shadow-outline ".concat(H?"placeholder-dark":""),id:"tableSchema",rows:3,value:U,autoFocus:!0,onChange:function(e){return $(e.target.value)},onBlur:function(){et||$("CREATE TABLE superstore (RowID INT,OrderID INT,OrderDate DATE,ShipDate DATE,ShipMode VARCHAR(255),CustomerID INT,CustomerName VARCHAR(255),Segment VARCHAR(255),Country VARCHAR(255),City VARCHAR(255),State VARCHAR(255),PostalCode VARCHAR(255),Region VARCHAR(255),ProductID INT,Category VARCHAR(255),SubCategory VARCHAR(255),Sales DECIMAL(10, 2),Quantity INT,Discount DECIMAL(5, 2),Profit DECIMAL(10, 2));")}})]})]})})}),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("div",{className:"rounded-xl bg-white border dark:border-gray-800 dark:bg-custom-gray shadow-md p-6 w-full h-full",style:{width:"100%"},children:(0,l.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,l.jsx)("label",{htmlFor:"Result",className:"block font-medium mb-2 text-gray-700 dark:text-gray-200",children:"Dataset Description"}),(0,l.jsx)("div",{className:"".concat(H?"text-white":"text-black"," whitespace-pre-wrap"),children:"You are “interacting” with Superstore dataset (from 2014-2017) to gain insights on the sales and Profit & Loss associated with products spanning across different regions and customer segments in US."}),(0,l.jsx)("div",{children:'Click on "View Schema" to get an overview about the definition of the dataset to frame your questions in natural language '})]})})})]}),en.length>0&&(0,l.jsx)("button",{className:"rounded-full flex items-center justify-center space-x-4 border text-sm font-medium mt-2 mb-2 px-4 py-2 [text-shadow:0_0_1px_rgba(0,0,0,0.25)] ".concat("light"===E?ex.light:ex.dark),onClick:function(){return ei(!el)},children:el?"Hide Result":"Show Result"}),el&&(0,l.jsx)(l.Fragment,{children:en.length>0&&(0,s._)(en).reverse().map(function(e,t){return(0,l.jsx)("div",{className:"w-full mb-6",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row w-full gap-6 bg-custom-background bg-gray-100 dark:bg-black dark:border-gray-800 border rounded-3xl from-blue-500 p-3",children:[(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("div",{className:"rounded-xl bg-white border dark:border-gray-800 dark:bg-custom-gray shadow-md p-6 w-full h-full",children:[(0,l.jsx)("label",{htmlFor:"inputText",className:"block mb-2 text-gray-300",children:e.isHumanToSql?"Your Input":"SQL"}),e.isHumanToSql?(0,l.jsx)("div",{className:"".concat(H?"text-white":"text-black"," whitespace-pre-wrap"),children:D(null==e?void 0:e.inputText)}):(0,l.jsx)(T,{language:"sql",style:H?d.cL:d.vs,wrapLines:!0,showLineNumbers:!0,lineNumberStyle:{color:H?"gray":"#ccc"},customStyle:{minHeight:"70px",maxHeight:"none",height:"auto",overflow:"visible",wordWrap:"break-word",color:"inherit",backgroundColor:H?"#1D1D1D":"#F8F8F8"},lineProps:{style:{whiteSpace:"pre-wrap"}},children:D(null==e?void 0:e.inputText)})]})}),(0,l.jsx)("div",{className:"w-full md:w-1/2",children:(0,l.jsx)("div",{className:"rounded-xl bg-white border dark:border-gray-800 dark:bg-custom-gray shadow-md p-6 w-full h-full",style:{width:"100%"},children:(0,l.jsx)("div",{className:"flex flex-col flex-1",children:(0,l.jsxs)("div",{style:{overflowX:"auto"},children:[(0,l.jsx)("label",{htmlFor:"inputText",className:"block mb-2 text-gray-300",children:"Result"}),(0,l.jsx)(j,{jsonText:D(null==e?void 0:e.outputText)})]})})})})]})},t)})}),(0,l.jsx)(h.c,{})]})}},94303:function(e){e.exports={loading:"loading-dots_loading__LomzL",spacer:"loading-dots_spacer__nBBvk",blink:"loading-dots_blink__yy72w",loading2:"loading-dots_loading2___zCAu"}}},function(e){e.O(0,[976,330,774,888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);